<?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="category">
	<select id="getCategoryList" resultType="map">
	SELECT
		MEMBERID,
		DEVICEID,
		CATEGORYID,
		NAME,
		SORTORDER,
		ISETC,
		ISSERVICE,
		ISEDITABLE,		
		CREATIONDATE,
		MODIFICATIONDATE		
	FROM CATEGORY
	WHERE MEMBERID = #{memberid} AND ISEDITABLE = #{iseditable}
	ORDER BY SORTORDER
	</select>
	
	<select id="getCategoryJsonList" resultType="map">
	SELECT
		MEMBERID,
		DEVICEID,
		CATEGORYID,
		NAME,
		SORTORDER,
		ISETC,
		ISSERVICE,
		ISEDITABLE,		
		CREATIONDATE,
		MODIFICATIONDATE		
	FROM CATEGORY
	WHERE MEMBERID = #{memberid}
	ORDER BY SORTORDER
	</select>
	
	<select id="getCategoryMenuJsonList" resultType="map">
	SELECT
		MEMBERID,
		DEVICEID,
		CATEGORYID,
		MENUID,
		NAME,
		SORTORDER,		
		STOREPRICE,
		DELIVERYPRICE,
		TAKEOUTPRICE,
		STOREPOINT,
		DELIVERYPOINT,
		TAKEOUTPOINT,
		STOREDISCOUNT,
		DELIVERYDISCOUNT,
		TAKEOUTDISCOUNT,
		ISHIDDEN,
		ISDELETED,
		CREATIONDATE,
		MODIFICATIONDATE
		
	FROM  MENU
	WHERE MEMBERID = #{memberid} AND CATEGORYID= #{categoryid} AND ISDELETED = #{isdeleted}
    ORDER BY SORTORDER 
	</select>
	
	<insert id="insertCategory" parameterType="com.goodbyenote.bapdosaptlweb.pos.model.CategoryVO">
		INSERT INTO CATEGORY (MEMBERID,
	            DEVICEID,
	            CATEGORYID,	            
	            NAME,
	            SORTORDER,
	            ISETC,
	            ISSERVIVE,
	            ISEDITABLE
	            )	            
	            
		VALUES (#{memberid},
				0,
				#{categoryid},				
				#{name},
				#{sortorder,jdbcType=VARCHAR},
				#{isetc ,jdbcType=VARCHAR},
				#{isservice,jdbcType=VARCHAR},
				#{iseditable,jdbcType=VARCHAR}				
				)
				
		)
	</insert>
	
	<!-- 수정 -->
	<update id="updateCategory" parameterType="com.goodbyenote.bapdosaptlweb.pos.model.CategoryVO">
		UPDATE CATEGORY
		SET    
		       
		       NAME             = #{name},
		       SORTORDER        = #{sortorder}
		WHERE  MEMBERID         = #{memberid}
		AND    DEVICEID         = #{deviceid}
		AND    CATEGORYID       = #{categoryid}
	</update>
	
	<select id="getCategoryMenuList" resultType="map">
	SELECT
		MEMBERID,
		DEVICEID,
		CATEGORYID,
		MENUID,
		NAME,
		SORTORDER,		
		STOREPRICE,
		DELIVERYPRICE,
		TAKEOUTPRICE,
		STOREPOINT,
		DELIVERYPOINT,
		TAKEOUTPOINT,
		STOREDISCOUNT,
		DELIVERYDISCOUNT,
		TAKEOUTDISCOUNT,
		ISHIDDEN,
		ISDELETED,
		CREATIONDATE,
		MODIFICATIONDATE
		
	FROM MENU
	WHERE MEMBERID = #{memberid} AND CATEGORYID= #{categoryid} AND ISDELETED = #{isdeleted}
    ORDER BY SORTORDER 
	</select>
	
	<select id="getCategoryPointList" resultType="com.goodbyenote.bapdosaptlweb.pos.model.MenuVO" >
	SELECT
		MEMBERID,
		DEVICEID,
		CATEGORYID,
		MENUID,
		NAME,
		SORTORDER,		
		STOREPRICE,
		DELIVERYPRICE,
		TAKEOUTPRICE,
		STOREPOINT,
		DELIVERYPOINT,
		TAKEOUTPOINT,
		STOREDISCOUNT,
		DELIVERYDISCOUNT,
		TAKEOUTDISCOUNT,
		ISHIDDEN,
		ISDELETED,
		CREATIONDATE,
		MODIFICATIONDATE
		
	FROM MENU
	WHERE MEMBERID = #{memberid} AND CATEGORYID= #{categoryid} AND ISDELETED = #{isdeleted}
    ORDER BY SORTORDER 
	</select>
	
	<select id="getDcTimeList" resultType="map">
        /* category.getDcTimeList */
		SELECT
			 MEMBERID
			,TIMEZONEDIVISION
			,ISDIFFERENTTIME
			,STARTTIME1
			,ENDTIME1
			,ISUSEDTIME1
			,STARTTIME2
			,ENDTIME2
			,ISUSEDTIME2
			,STARTTIME3
			,ENDTIME3
			,ISUSEDTIME3
			,STARTTIME4
			,ENDTIME4
			,ISUSEDTIME4
			,STARTTIME5
			,ENDTIME5
			,ISUSEDTIME5
			,STARTTIME6
			,ENDTIME6
			,ISUSEDTIME6
			,STARTTIME7
			,ENDTIME7
			,ISUSEDTIME7
			,CREATIONDATE
			,MODIFICATIONDATE
		FROM
			TIMEZONESETTING
		WHERE
			MEMBERID = #{memberid}
		AND TIMEZONEDIVISION = '1'				
			
    </select>
	
	<insert id="insertCateMenu" parameterType="map">
		INSERT INTO MENU (
		        MEMBERID,
	            DEVICEID,
	            CATEGORYID,
	            MENUID,
	            NAME,
	            SORTORDER,	            
	            STOREPRICE,
	            DELIVERYPRICE,
	            TAKEOUTPRICE	            
	           )
		VALUES ( 
		        #{memberid},
				#{deviceid},
				#{categoryid},
				#{menuid},
				#{name},
				#{sortorder},				
				#{storeprice},
				#{deliveryprice},
				#{takeoutprice}
									
		       )
	</insert>
	
	<!-- 수정 -->
	<update id="updateCateMenu" parameterType="com.goodbyenote.bapdosaptlweb.pos.model.MenuVO">
		UPDATE MENU
		SET    	
		        MENUID              = #{menuid, jdbcType=NUMERIC},	        
	            CATEGORYID          = #{categoryid , jdbcType=NUMERIC},
	            NAME                = #{name , jdbcType=VARCHAR},
	            SORTORDER           = #{sortorder , jdbcType=NUMERIC},	           
	            STOREPRICE          = #{storeprice , jdbcType=NUMERIC},
	            DELIVERYPRICE	    = #{deliveryprice , jdbcType=NUMERIC},
	            TAKEOUTPRICE        = #{takeoutprice , jdbcType=NUMERIC},
	            ISHIDDEN            = #{ishidden , jdbcType=VARCHAR},
	            ISDELETED           = #{isdeleted , jdbcType=VARCHAR}	       
		       
		WHERE  MEMBERID         = #{memberid , jdbcType=VARCHAR}
		AND    DEVICEID         = #{deviceid , jdbcType=NUMERIC}
		AND    MENUID           = #{menuid , jdbcType=NUMERIC}		
	</update>
	
	<update id="updateCatePoint" parameterType="com.goodbyenote.bapdosaptlweb.pos.model.MenuVO">
		UPDATE MENU
		SET    	
		        MENUID              = #{menuid, jdbcType=NUMERIC},	        
	            CATEGORYID          = #{categoryid , jdbcType=NUMERIC},
	            NAME                = #{name , jdbcType=VARCHAR},
	            SORTORDER           = #{sortorder , jdbcType=NUMERIC},	           
	            STOREPOINT          = #{storepoint , jdbcType=NUMERIC},
	            DELIVERYPOINT	    = #{deliverypoint , jdbcType=NUMERIC},
	            TAKEOUTPOINT        = #{takeoutpoint , jdbcType=NUMERIC},
	            STOREDISCOUNT       = #{storediscount , jdbcType=NUMERIC},
	            DELIVERYDISCOUNT    = #{deliverydiscount , jdbcType=NUMERIC},
	            TAKEOUTDISCOUNT     = #{takeoutdiscount , jdbcType=NUMERIC}	       
		       
		WHERE  MEMBERID         = #{memberid , jdbcType=VARCHAR}
		AND    DEVICEID         = #{deviceid , jdbcType=NUMERIC}
		AND    MENUID           = #{menuid , jdbcType=NUMERIC}		
	</update>
	
	<update id="updateDcMenu">
        /* category.updateDcMenu */
        
		UPDATE TIMEZONESETTING
		SET    		       
		       TIMEZONEDIVISION    = #{timezonedivision},
		       ISDIFFERENTTIME     = #{isdifferenttime},
		       STARTTIME1          = #{starttime1},
		       STARTTIME2          = #{starttime2},
		       STARTTIME3          = #{starttime3},
		       STARTTIME4          = #{starttime4},
		       STARTTIME5          = #{starttime5},
		       STARTTIME6          = #{starttime6},
		       STARTTIME7          = #{starttime7},
		       ENDTIME1            = #{endtime1},
		       ENDTIME2            = #{endtime2},
		       ENDTIME3            = #{endtime3},
		       ENDTIME4            = #{endtime4},
		       ENDTIME5            = #{endtime5},
		       ENDTIME6            = #{endtime6},
		       ENDTIME7            = #{endtime7},
		       ISUSEDTIME1         = #{isusedtime1},
		       ISUSEDTIME2         = #{isusedtime2},
		       ISUSEDTIME3         = #{isusedtime3},
		       ISUSEDTIME4         = #{isusedtime4},
		       ISUSEDTIME5         = #{isusedtime5},
		       ISUSEDTIME6         = #{isusedtime6},
		       ISUSEDTIME7         = #{isusedtime7}
		       		       
		WHERE  MEMBERID            = #{memberid}
		AND    TIMEZONEDIVISION    = '1'
		
    </update>
	  
</mapper>